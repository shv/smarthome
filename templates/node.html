{% extends "wrapper.html" %}

{% block content %}
    <h1>Node {{ node_id }}</h1>
    <ul id='nodes'></ul>
    <ul id='values'></ul>
    <div><input type="checkbox" id='lamp1' /><label for="lamp1">Lamp 1</label></div>
    <div><input type="checkbox" id='lamp2' /><label for="lamp2">Lamp 2</label></div>
    <script>
        $.get("/api/nodes/{{ node_id }}",
            function (data, status) {
                console.log("Data: " + data + "\nStatus: " + status);
                var nodes_el = document.getElementById('nodes')
                var node_el = document.createElement('li')
                var content = document.createTextNode(
                    "ID: " + data["id"] + ", url: " + data["url"] + ", is_active: " + data["is_active"]
                )
                node_el.appendChild(content)
                nodes_el.appendChild(node_el)
            }
        );

        $.get("/api/nodes/{{ node_id }}/current-values",
            function (data, status) {
                console.log("Data: " + data + "\nStatus: " + status);
                var nodes_el = document.getElementById('values')
                data["data"].forEach(function (currentValue, index, arr) {
                    console.log(currentValue)
                    var node_el = document.createElement('li')
                    var value_label_el = document.createElement('span')
                    var value_label_content = document.createTextNode(
                        "ID: " + currentValue["id"] + ", " + currentValue["name"] + ": "
                    )
                    value_label_el.appendChild(value_label_content)
                    var value_value_el = document.createElement('span')
                    var value_value_content = document.createTextNode(currentValue["value"])
                    value_value_el.appendChild(value_value_content)
                    value_value_el.id = "current-value-" + currentValue["id"]
                    node_el.appendChild(value_label_el)
                    node_el.appendChild(value_value_el)
                    nodes_el.appendChild(node_el)
                });
            }
        );
    </script>
{% endblock %}
